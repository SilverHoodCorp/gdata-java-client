<project basedir="." default="build" name="gdata">

	<property environment="env" />
	<property name="android-jar" value="/android-sdk-linux/platforms/android-2.0.1/android.jar" />
	<property name="src-dir" value="../src" />
	<property name="out-dir" value="gdata" />
	<property name="bin-dir" value="bin" />
	<property name="bin-debug-dir" value="bin-debug" />

	<target name="delete">
		<delete dir="${bin-dir}" />
		<delete dir="${bin-debug-dir}" />
		<delete dir="${out-dir}" />
	</target>

	<target name="build-bin-debug">
		<mkdir dir="${out-dir}" />
		<mkdir dir="${bin-debug-dir}" />
		<copy includeemptydirs="false" todir="${bin-debug-dir}">
			<fileset dir="${src-dir}" />
		</copy>
		<javac debug="true" debuglevel="source,lines,vars" destdir="${bin-debug-dir}" source="1.5" target="1.5">
			<src path="${src-dir}" />
			<classpath>
				<pathelement location="${bin-debug-dir}" />
				<pathelement location="${android-jar}" />
				<pathelement location="lib/jackson-core-asl-1.4.3.jar" />
				<pathelement location="lib/httpcore-4.0.1.jar" />
				<pathelement location="lib/kxml2-2.3.0.jar" />
			</classpath>
		</javac>
	</target>

	<target name="build-bin">
		<mkdir dir="${out-dir}" />
		<mkdir dir="${bin-dir}" />
		<javac destdir="${bin-dir}" source="1.5" target="1.5">
			<src path="${src-dir}" />
			<classpath>
				<pathelement location="${bin-dir}" />
				<pathelement location="${android-jar}" />
				<pathelement location="lib/jackson-core-asl-1.4.3.jar" />
				<pathelement location="lib/httpcore-4.0.1.jar" />
				<pathelement location="lib/kxml2-2.3.0.jar" />
			</classpath>
		</javac>
	</target>

	<target name="gdata-full-jar" depends="build-bin-debug">
		<jar destfile="${out-dir}/gdata-full.jar" basedir="${bin-debug-dir}" />
	</target>

	<target name="gdata-android-v2-jar" depends="build-bin">
		<jar destfile="${out-dir}/gdata-android-v2.jar" basedir="${bin-dir}" includes="com/google/api/data/client/v2/*.class,com/google/api/data/client/v2/android/*.class,com/google/api/data/client/v2/apache/*.class,com/google/api/data/client/v2/escape/*.class" />
	</target>

	<target name="gdata-atom-v2-jar" depends="build-bin">
		<jar destfile="${out-dir}/gdata-atom-v2.jar" basedir="${bin-dir}" includes="com/google/api/data/client/v2/atom/**,com/google/api/data/client/v2/android/atom/**" />
	</target>

	<target name="gdata-jsonc-v2-jar" depends="build-bin">
		<jar destfile="${out-dir}/gdata-jsonc-v2.jar" basedir="${bin-dir}" includes="com/google/api/data/client/v2/jsonc/**" />
	</target>

	<target name="gdata-picasa-v2-jar" depends="build-bin">
		<jar destfile="${out-dir}/gdata-picasa-v2.jar" basedir="${bin-dir}" includes="com/google/api/data/picasa/v2/**" />
	</target>

	<target name="gdata-youtube-v2-jar" depends="build-bin">
		<jar destfile="${out-dir}/gdata-youtube-v2.jar" basedir="${bin-dir}" includes="com/google/api/data/youtube/v2/**" />
	</target>

	<target name="build" depends="gdata-full-jar,gdata-android-v2-jar,gdata-atom-v2-jar,gdata-jsonc-v2-jar,gdata-picasa-v2-jar,gdata-youtube-v2-jar" />
	<target name="clean-build" depends="delete,build" />
</project>
